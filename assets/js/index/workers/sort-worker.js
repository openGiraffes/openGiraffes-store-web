const WORKER_NAME="Sort";importScripts("common.js"),onmessage=function(o){wLog("log","Sort worker started.");const t={apps:[],sort:null};"object"==typeof o.data.apps&&"string"==typeof o.data.sort||(wLog("error","Missing arguments for sort worker. Sending back empty data."),postMessage(t)),wLog("log",'Sorting using "'+o.data.sort+'" sort.');const s=Object.entries(o.data.apps);switch(o.data.sort){case"alphabetical":s.sort((function(o,t){const s=o[1].name.toUpperCase(),a=t[1].name.toUpperCase();return s>a?1:s<a?-1:0}));break;case"popularity":o.data.downloadCounts?s.sort((function(t,s){const a=o.data.downloadCounts[t[1].slug],r=o.data.downloadCounts[s[1].slug];return a>r?-1:a<r?1:0})):wLog("error","Missing downloadCounts to sort by popularity!");break;case"categorical":s.sort((function(o,t){const s=o[1].meta.categories[0].toUpperCase(),a=t[1].meta.categories[0].toUpperCase();return s>a?1:s<a?-1:0}))}const a={};for(const o of s)a[o[0]]=o[1];t.apps=a,wLog("log","Sort worker completed!"),postMessage(t)};