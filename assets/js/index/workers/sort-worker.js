const WORKER_NAME="Sort";importScripts("common.js"),onmessage=function(o){wLog("log","Sort worker started.");var t={apps:[],sort:null};"object"==typeof o.data.apps&&"string"==typeof o.data.sort||(wLog("error","Missing arguments for sort worker. Sending back empty data."),postMessage(t)),wLog("log",'Sorting using "'+o.data.sort+'" sort.');var a=Object.entries(o.data.apps);switch(o.data.sort){case"alphabetical":a.sort((function(o,t){const a=o[1].name.toUpperCase(),r=t[1].name.toUpperCase();return a>r?1:a<r?-1:0}));break;case"popularity":o.data.downloadCounts?a.sort((function(t,a){const r=o.data.downloadCounts[t[1].slug],s=o.data.downloadCounts[a[1].slug];return r>s?-1:r<s?1:0})):wLog("error","Missing downloadCounts to sort by popularity!");break;case"categorical":a.sort((function(o,t){const a=o[1].meta.categories[0].toUpperCase(),r=t[1].meta.categories[0].toUpperCase();return a>r?1:a<r?-1:0}))}var r={};for(const o of a)r[o[0]]=o[1];t.apps=r,wLog("log","Sort worker completed!"),postMessage(t)};